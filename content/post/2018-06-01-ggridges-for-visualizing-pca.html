---
title: "ggridges for visualizing PCA"
author: "null"
date: '2018-12-01'
header:
  caption: ''
  image: ''
slug: ggridges-for-visualizing-pca
tags: []
categories: []
---



<p>First things first, computing the PCA without the <code>cyl</code>variable that afterwards will be used as factor variable to plot the loadings of the PCA. I also center and scale the PCA becuase the units in each variable are different.</p>
<pre class="r"><code>library(magrittr)
mtcars %&gt;% head</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<pre class="r"><code>mtcars2 = mtcars[,-2]
pca = prcomp(x = mtcars2,center = T,scale. = T)</code></pre>
<p>Usually the classical representation of a PCA is a scattter plot between 2 components. This is helpful when you try to distinguish 2 groups because it maximizes the use of more components to separate the possible clusters.</p>
<pre class="r"><code>suppressPackageStartupMessages(library(ggfortify))

autoplot(pca,data = mtcars, colour = &#39;cyl&#39;)</code></pre>
<p><img src="/post/2018-06-01-ggridges-for-visualizing-pca_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>However, if we are interested in how a single categorical variable is represented then this representation gets unreadable. Instead of focusing in the differentiation of the points in 2 dimensions we should focus in one dimension only. You could do a boxplot but I sometimes feel like the horitzontal axis is more useful when you try to increase the differences between groups.</p>
<p>A possibility</p>
<pre class="r"><code>pca_df = pca$x %&gt;% as.data.frame() %&gt;% dplyr::mutate(inst = rownames(.)) 
mtcars_df = mtcars %&gt;% as.data.frame() %&gt;% dplyr::mutate(inst = rownames(.))

df = dplyr::inner_join(mtcars_df,pca_df)


library(ggplot2)
library(ggridges)
df = df %&gt;% tidyr::gather(&quot;PC&quot;,&quot;weight&quot;,tidyselect::contains(&quot;PC&quot;) ) 
df$PC = forcats::fct_relevel(df$PC,glue::glue(&quot;PC{1:10}&quot;))


fp = df %&gt;%ggplot(aes(x = weight,fill=factor(cyl),y=factor(cyl))) + 
  geom_density_ridges(jittered_points = TRUE,
                      position = position_points_jitter(width = 0.05,
                                                        height = 0),
                      point_shape = &#39;|&#39;, point_size = 3, alpha = 0.7) +
  facet_wrap(~PC, scales = &quot;free&quot;)


fp + theme_minimal()</code></pre>
<p><img src="/post/2018-06-01-ggridges-for-visualizing-pca_files/figure-html/unnamed-chunk-3-1.png" width="960" /></p>
